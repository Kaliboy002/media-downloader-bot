#!/usr/bin/env ruby

require_relative '../bot'

ENV['PRINT_CMD'] = '1'
include Zipper

i      = SymMash.new fn_in: ARGV[0], opts: {metadata: {}}
prc    = Bot::Processor.probe i
fn_out = ARGV[1]
i.opts.metadata.url = 'youtu.be/7vhgfImhXIg'
i.opts.format = i.type[i.opts.format || i.type[:default]]

o, e, st = send "zip_#{i.type.name}", i.fn_in, fn_out,
  opts: i.opts, probe: i.probe
if st != 0
  raise e
end

